Evaluating test cases...
**************************************************
Contextual Recall Verbose Logs
**************************************************

Verdicts:
[
    {
        "verdict": "yes",
        "reason": "1st node contains 'custom_event' as 'type' and a 'filter' with 'fieldId': 'name'..."
    },
    {
        "verdict": "yes",
        "reason": "1st node criteria matches 'eventName': 'fsales_trial_events', 'operation': 'performed', 'dateCondition' with operator 'after'..."
    },
    {
        "verdict": "yes",
        "reason": "2nd node contains 'custom_event' as 'type' and a 'filter' with 'fieldId': 'name'..."
    },
    {
        "verdict": "yes",
        "reason": "2nd node criteria matches 'eventName': 'fsales_trial_events', 'operation': 'performed', 'dateCondition' with operator 'after'..."
    }
]


Score: 1.0
Reason: The score is 1.00 because all elements in the expected output are perfectly aligned with the nodes in retrieval context. Each node's 'type', 'filter', and 'criteria' match the expected configuration, indicating a flawless recall.

======================================================================
**************************************************
Answer Relevancy Verbose Logs
**************************************************

Statements:
[
    "condition: AND",
    "matchGroups condition: AND",
    "type: CustomEventCriteria",
    "criteria condition: AND",
    "eventName: fsales_trial_events",
    "dateCondition operator: after",
    "dateCondition timezone: -330",
    "dateCondition value: 2021-10-14T18:30:00.000Z",
    "dateCondition relativeDateCount: 0",
    "operation: performed",
    "occurenceCondition name: FIRST_OCCURRENCE",
    "occurenceCondition type: date",
    "occurenceCondition operator: after",
    "occurenceCondition value: 2021-10-14T18:30:00.000Z",
    "dateCondition operator: anytime",
    "dateCondition timezone: -330",
    "dateCondition value: 2021-10-14T18:30:00.000Z",
    "dateCondition relativeDateCount: 0"
]


Verdicts:
[
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition operator: anytime' statement contradicts the specific time condition stated in the input."
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    }
]


Score: 0.9444444444444444
Reason: The score is 0.94 because the mention of 'dateCondition operator: anytime' is irrelevant and contradicts the specific post-2021-10-14T18:30:00.000Z time condition requested in the input.

======================================================================
✨ You're running DeepEval's latest Contextual Recall Metric! (using azure open…
✨ You're running DeepEval's latest Answer Relevancy Metric! (using azure opena…

======================================================================

Metrics Summary

  - ✅ Contextual Recall (score: 1.0, threshold: 0.8, strict: False, evaluation model: azure openai, reason: The score is 1.00 because all elements in the expected output are perfectly aligned with the nodes in retrieval context. Each node's 'type', 'filter', and 'criteria' match the expected configuration, indicating a flawless recall., error: None)
  - ✅ Answer Relevancy (score: 0.9444444444444444, threshold: 0.6, strict: False, evaluation model: azure openai, reason: The score is 0.94 because the mention of 'dateCondition operator: anytime' is irrelevant and contradicts the specific post-2021-10-14T18:30:00.000Z time condition requested in the input., error: None)

For test case:

  - input: Get me contacts who have performed the 'fsales_trial_events' event with 'freshmarketer_domain_added' in the name after 2021-10-14T18:30:00.000Z, and who have also performed the 'fsales_trial_events' event with 'freshmarketer_campaign_created' in the name after 2021-10-14T18:30:00.000Z
  - actual output: {
    "condition": "AND",
    "matchGroups": [
        {
            "condition": "AND",
            "matches": [
                {
                    "type": "CustomEventCriteria",
                    "condition": "AND",
                    "criteria": {
                        "eventName": "fsales_trial_events",
                        "dateCondition": {
                            "operator": "after",
                            "timezone": -330,
                            "value": "2021-10-14T18:30:00.000Z",
                            "relativeDateCount": 0
                        },
                        "operation": "performed",
                        "occurenceCondition": {
                            "name": "FIRST_OCCURRENCE",
                            "type": "date",
                            "operator": "after",
                            "value": "2021-10-14T18:30:00.000Z",
                            "dateCondition": {
                                "operator": "anytime",
                                "timezone": -330,
                                "value": "2021-10-14T18:30:00.000Z",
                                "relativeDateCount": 0
                            }
                        }
                    }
                },
                {
                    "type": "CustomEventCriteria",
                    "condition": "AND",
                    "criteria": {
                        "eventName": "fsales_trial_events",
                        "dateCondition": {
                            "operator": "after",
                            "timezone": -330,
                            "value": "2021-10-14T18:30:00.000Z",
                            "relativeDateCount": 0
                        },
                        "operation": "performed",
                        "occurenceCondition": {
                            "name": "FIRST_OCCURRENCE",
                            "type": "date",
                            "operator": "after",
                            "value": "2021-10-14T18:30:00.000Z",
                            "dateCondition": {
                                "operator": "anytime",
                                "timezone": -330,
                                "value": "2021-10-14T18:30:00.000Z",
                                "relativeDateCount": 0
                            }
                        }
                    }
                }
            ]
        }
    ]
}
  - expected output: {"condition": "AND", "matchGroups": [{"matches": [{"type": "custom_event", "filters": [{"value": "freshmarketer_domain_added", "fieldId": "name", "fieldName": "name", "fieldType": "string", "columnName": "ef_string_01", "comparator": "contains"}], "criteria": {"eventName": "fsales_trial_events", "operation": "performed", "dateCondition": {"value": "2021-10-14T18:30:00.000Z", "operator": "after", "timezone": -330}}, "condition": "AND"}], "condition": "AND"}, {"matches": [{"type": "custom_event", "filters": [{"value": "freshmarketer_campaign_created", "fieldId": "name", "fieldName": "name", "fieldType": "string", "columnName": "ef_string_01", "comparator": "contains"}], "criteria": {"eventName": "fsales_trial_events", "operation": "performed", "dateCondition": {"value": "2021-10-14T18:30:00.000Z", "operator": "after", "timezone": -330}}, "condition": "AND"}], "condition": "OR"}]}
  - context: None
  - retrieval context: ['{\n    "condition": "AND",\n    "matchGroups": [\n        {\n            "condition": "AND",\n            "matches": [\n                {\n                    "type": "CustomEventCriteria",\n                    "condition": "AND",\n                    "criteria": {\n                        "eventName": "fsales_trial_events",\n                        "dateCondition": {\n                            "operator": "after",\n                            "timezone": -330,\n                            "value": "2021-10-14T18:30:00.000Z",\n                            "relativeDateCount": 0\n                        },\n                        "operation": "performed",\n                        "occurenceCondition": {\n                            "name": "FIRST_OCCURRENCE",\n                            "type": "date",\n                            "operator": "after",\n                            "value": "2021-10-14T18:30:00.000Z",\n                            "dateCondition": {\n                                "operator": "anytime",\n                                "timezone": -330,\n                                "value": "2021-10-14T18:30:00.000Z",\n                                "relativeDateCount": 0\n                            }\n                        }\n                    }\n                },\n                {\n                    "type": "CustomEventCriteria",\n                    "condition": "AND",\n                    "criteria": {\n                        "eventName": "fsales_trial_events",\n                        "dateCondition": {\n                            "operator": "after",\n                            "timezone": -330,\n                            "value": "2021-10-14T18:30:00.000Z",\n                            "relativeDateCount": 0\n                        },\n                        "operation": "performed",\n                        "occurenceCondition": {\n                            "name": "FIRST_OCCURRENCE",\n                            "type": "date",\n                            "operator": "after",\n                            "value": "2021-10-14T18:30:00.000Z",\n                            "dateCondition": {\n                                "operator": "anytime",\n                                "timezone": -330,\n                                "value": "2021-10-14T18:30:00.000Z",\n                                "relativeDateCount": 0\n                            }\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}']

======================================================================

Overall Metric Pass Rates

Contextual Recall: 100.00% pass rate
Answer Relevancy: 100.00% pass rate

======================================================================

✅ Tests finished! View results on 
https://app.confident-ai.com/project/clwzxg76s000clc0ch0w2kpcw/unit-tests/cly0yh
mmc0785up7nm9amkz76/test-cases
