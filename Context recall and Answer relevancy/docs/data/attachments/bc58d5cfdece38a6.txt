Evaluating test cases...
**************************************************
Contextual Recall Verbose Logs
**************************************************

Verdicts:
[
    {
        "verdict": "yes",
        "reason": "Matches the 'type': 'custom_event' and 'fieldName': 'name' in the 1st node's 'matches'."
    },
    {
        "verdict": "yes",
        "reason": "Matches the 'value': 'freshsales_imap_configured' and 'comparator': 'contains' in the 1st node's 'filters'."
    },
    {
        "verdict": "yes",
        "reason": "Matches the 'eventName': 'fsales_trial_event' and 'operation': 'performed' in the 1st node's 'criteria'."
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition' value '2021-03-30T18:30:00.000Z' does not match the 'value' in the 1st node's 'dateCondition'."
    },
    {
        "verdict": "yes",
        "reason": "Matches the 'type': 'custom_event' and 'fieldName': 'name' in the 1st node's 'matches'."
    },
    {
        "verdict": "yes",
        "reason": "Matches the 'value': 'freshsales_connected_calendar' and 'comparator': 'contains' in the 1st node's 'filters'."
    },
    {
        "verdict": "yes",
        "reason": "Matches the 'eventName': 'fsales_trial_event' and 'operation': 'performed' in the 1st node's 'criteria'."
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition' value '2021-03-30T18:30:00.000Z' does not match the 'value' in the 1st node's 'dateCondition'."
    }
]


Score: 0.75
Reason: The score is 0.75 because the majority of elements in the expected output are matched by the 1st node in retrieval context, including 'type', 'fieldName', 'value', 'comparator', 'eventName', and 'operation'. However, the 'dateCondition' value discrepancy in the 1st node reduces the score.

======================================================================
**************************************************
Answer Relevancy Verbose Logs
**************************************************

Statements:
[
    "condition: AND",
    "type: custom_event",
    "condition: AND",
    "eventName: fsales_trial_event",
    "dateCondition operator: after",
    "dateCondition timezone: -330",
    "dateCondition value: 2021-03-30T00:00:00.000Z",
    "operation: performed",
    "occurenceCondition name: FIRST_OCCURRENCE",
    "occurenceCondition type: date",
    "occurenceCondition operator: after",
    "occurenceCondition value: 2021-03-30T00:00:00.000Z",
    "dateCondition operator: anytime",
    "dateCondition timezone: -330",
    "dateCondition value: 2024-06-18T13:09:00.108Z"
]


Verdicts:
[
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition operator: anytime' statement made in the actual output is irrelevant to the input, which specifies a date condition with an operator 'after' not 'anytime'."
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition timezone: -330' statement made in the actual output is irrelevant in the context of the input, which does not specify a requirement for a timezone, especially not a timezone value of -330."
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition value: 2024-06-18T13:09:00.108Z' statement made in the actual output is irrelevant to the input, which asks for contacts after a specific date, 2021-03-30, and does not mention this future date."
    }
]


Score: 0.8
Reason: The score is 0.80 because the response accurately addresses the input's requirements for a custom event and specific event name conditions but includes irrelevant details about date condition operators and timezone specifications that were not requested.

======================================================================
✨ You're running DeepEval's latest Contextual Recall Metric! (using azure open…
✨ You're running DeepEval's latest Answer Relevancy Metric! (using azure opena…

======================================================================

Metrics Summary

  - ❌ Contextual Recall (score: 0.75, threshold: 0.8, strict: False, evaluation model: azure openai, reason: The score is 0.75 because the majority of elements in the expected output are matched by the 1st node in retrieval context, including 'type', 'fieldName', 'value', 'comparator', 'eventName', and 'operation'. However, the 'dateCondition' value discrepancy in the 1st node reduces the score., error: None)
  - ✅ Answer Relevancy (score: 0.8, threshold: 0.6, strict: False, evaluation model: azure openai, reason: The score is 0.80 because the response accurately addresses the input's requirements for a custom event and specific event name conditions but includes irrelevant details about date condition operators and timezone specifications that were not requested., error: None)

For test case:

  - input: Get me contacts who have performed the custom event 'fsales_trial_event' after 2021-03-30 with the event name containing both 'freshsales_imap_configured' and 'freshsales_connected_calendar'.
  - actual output: {
  "condition": "AND",
  "matchGroups": [
    {
      "condition": "AND",
      "matches": [
        {
          "type": "custom_event",
          "condition": "AND",
          "criteria": {
            "eventName": "fsales_trial_event",
            "dateCondition": {
              "operator": "after",
              "timezone": -330,
              "value": "2021-03-30T00:00:00.000Z"
            },
            "operation": "performed",
            "occurenceCondition": {
              "name": "FIRST_OCCURRENCE",
              "type": "date",
              "operator": "after",
              "value": "2021-03-30T00:00:00.000Z",
              "dateCondition": {
                "operator": "anytime",
                "timezone": -330,
                "value": "2024-06-18T13:09:00.108Z"
              }
            }
          }
        }
      ]
    }
  ]
}
  - expected output: {"condition": "AND", "matchGroups": [{"matches": [{"type": "custom_event", "filters": [{"value": "freshsales_imap_configured", "fieldId": "name", "fieldName": "name", "fieldType": "string", "columnName": "ef_string_01", "comparator": "contains"}], "criteria": {"eventName": "fsales_trial_event", "operation": "performed", "dateCondition": {"value": "2021-03-30T18:30:00.000Z", "operator": "after", "timezone": -330}}, "condition": "AND"}, {"type": "custom_event", "filters": [{"value": "freshsales_connected_calendar", "fieldId": "name", "fieldName": "name", "fieldType": "string", "columnName": "ef_string_01", "comparator": "contains"}], "criteria": {"eventName": "fsales_trial_event", "operation": "performed", "dateCondition": {"value": "2021-03-30T18:30:00.000Z", "operator": "after", "timezone": -330}}, "condition": "AND"}], "condition": "AND"}]}
  - context: None
  - retrieval context: ['{\n  "condition": "AND",\n  "matchGroups": [\n    {\n      "condition": "AND",\n      "matches": [\n        {\n          "type": "custom_event",\n          "condition": "AND",\n          "criteria": {\n            "eventName": "fsales_trial_event",\n            "dateCondition": {\n              "operator": "after",\n              "timezone": -330,\n              "value": "2021-03-30T00:00:00.000Z"\n            },\n            "operation": "performed",\n            "occurenceCondition": {\n              "name": "FIRST_OCCURRENCE",\n              "type": "date",\n              "operator": "after",\n              "value": "2021-03-30T00:00:00.000Z",\n              "dateCondition": {\n                "operator": "anytime",\n                "timezone": -330,\n                "value": "2024-06-18T13:09:00.108Z"\n              }\n            }\n          }\n        }\n      ]\n    }\n  ]\n}']

======================================================================

Overall Metric Pass Rates

Contextual Recall: 0.00% pass rate
Answer Relevancy: 100.00% pass rate

======================================================================

✅ Tests finished! View results on 
https://app.confident-ai.com/project/clwzxg76s000clc0ch0w2kpcw/unit-tests/cly0xr
biu078pns2a8ibs9nmb/test-cases
