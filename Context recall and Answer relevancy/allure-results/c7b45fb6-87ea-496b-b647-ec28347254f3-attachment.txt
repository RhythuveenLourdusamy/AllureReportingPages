Evaluating test cases...
**************************************************
Contextual Recall Verbose Logs
**************************************************

Verdicts:
[
    {
        "verdict": "no",
        "reason": "The 'id' in the 1st node of the retrieval context is '15034', not '29182' as in the expected output."
    },
    {
        "verdict": "no",
        "reason": "The 'fieldId' in the 2nd node of the retrieval context is '5d926007-8a23-430b-a587-0173b23dde8e', not 'c1fb4799-b71c-444f-9bb0-f57b37dbdd8b' as in the expected output."
    },
    {
        "verdict": "no",
        "reason": "The 'dateCondition.value' in the 3rd node of the retrieval context is '2024-06-18T13:09:00.108Z', not '2021-02-03T18:30:00.000Z' as in the expected output."
    }
]


Score: 0.0
Reason: The score is 0.00 because the 'id' mentioned in the first sentence of the expected output does not match the 'id' in the first node in retrieval context, the 'fieldId' referenced in the second sentence does not align with the 'fieldId' in the second node in retrieval context, and the 'dateCondition.value' specified in the third sentence is inconsistent with the 'dateCondition.value' in the third node in retrieval context.

======================================================================
**************************************************
Answer Relevancy Verbose Logs
**************************************************

Statements:
[
    "AND",
    "list_membership",
    "AND",
    "id: 15034",
    "resourceMatchType: specificResource",
    "operation: eq",
    "contact_field",
    "AND",
    "fieldId: 5d926007-8a23-430b-a587-0173b23dde8e",
    "fieldName: cf_cf_gdprdoubleopt-in",
    "columnName: cf_cf_gdprdoubleopt-in",
    "fieldType: big_number",
    "comparator: neq",
    "value: 0",
    "secondValue: ",
    "email_event",
    "AND",
    "operation: not_sent",
    "id: 0",
    "resourceMatchType: anyResource",
    "name: count",
    "type: number",
    "operator: last_n_days_including_today",
    "value: 3",
    "timezone: -330",
    "value: 2024-06-18T13:09:00.108Z",
    "relativeDateCount: 3"
]


Verdicts:
[
    {
        "verdict": "idk",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "idk",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "idk",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "no",
        "reason": "The statement is not directly relevant to the input, which asks for contacts from a specific list with given criteria, not about a field's data type or comparator."
    },
    {
        "verdict": "no",
        "reason": "The statement appears to be incomplete and not directly relevant to the input query."
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "yes",
        "reason": null
    },
    {
        "verdict": "no",
        "reason": "The statement provides a specific date and time which is not relevant to the criteria described in the input."
    },
    {
        "verdict": "yes",
        "reason": null
    }
]


Score: 0.8928571428571429
Reason: The score is 0.89 because the output largely addresses the request by focusing on contacts from the specified list with the right status and email activity, but includes some irrelevant information regarding data types and a specific date and time that do not pertain to the criteria specified in the input.

======================================================================
✨ You're running DeepEval's latest Contextual Recall Metric! (using azure open…
✨ You're running DeepEval's latest Answer Relevancy Metric! (using azure opena…

======================================================================

Metrics Summary

  - ❌ Contextual Recall (score: 0.0, threshold: 0.8, strict: False, evaluation model: azure openai, reason: The score is 0.00 because the 'id' mentioned in the first sentence of the expected output does not match the 'id' in the first node in retrieval context, the 'fieldId' referenced in the second sentence does not align with the 'fieldId' in the second node in retrieval context, and the 'dateCondition.value' specified in the third sentence is inconsistent with the 'dateCondition.value' in the third node in retrieval context., error: None)
  - ✅ Answer Relevancy (score: 0.8928571428571429, threshold: 0.6, strict: False, evaluation model: azure openai, reason: The score is 0.89 because the output largely addresses the request by focusing on contacts from the specified list with the right status and email activity, but includes some irrelevant information regarding data types and a specific date and time that do not pertain to the criteria specified in the input., error: None)

For test case:

  - input: Get me contacts who are members of the list 'FY21-Q1-CS-SM-CX-Weekly - List 6', whose status is not 'Unsubscribed,' and have not been sent any email in the last 3 days including today.
  - actual output: {
    "condition": "AND",
    "matchGroups": [
        {
            "condition": "AND",
            "matches": [
                {
                    "type": "list_membership",
                    "condition": "AND",
                    "criteria": {
                        "id": 15034,
                        "resourceMatchType": "specificResource",
                        "operation": "eq"
                    }
                },
                {
                    "type": "contact_field",
                    "condition": "AND",
                    "criteria": {
                        "fieldId": "5d926007-8a23-430b-a587-0173b23dde8e",
                        "fieldName": "cf_cf_gdprdoubleopt-in",
                        "columnName": "cf_cf_gdprdoubleopt-in",
                        "fieldType": "big_number",
                        "comparator": "neq",
                        "value": "0",
                        "secondValue": ""
                    }
                },
                {
                    "type": "email_event",
                    "condition": "AND",
                    "criteria": {
                        "operation": "not_sent",
                        "id": 0,
                        "resourceMatchType": "anyResource",
                        "occurenceCondition": {
                            "name": "count",
                            "type": "number",
                            "operator": "last_n_days_including_today",
                            "value": "3",
                            "dateCondition": {
                                "operator": "last_n_days_including_today",
                                "timezone": -330,
                                "value": "2024-06-18T13:09:00.108Z",
                                "relativeDateCount": 3
                            }
                        },
                        "dateCondition": {
                            "operator": "last_n_days_including_today",
                            "timezone": -330,
                            "value": "2024-06-18T13:09:00.108Z",
                            "relativeDateCount": 3
                        }
                    }
                }
            ]
        }
    ]
}
  - expected output: {"condition": "AND", "matchGroups": [{"matches": [{"type": "list_membership", "filters": [], "criteria": {"id": "29182", "operation": "eq", "resourceMatchType": "specificResource"}, "condition": "AND"}, {"type": "contact_field", "filters": [], "criteria": {"value": "Unsubscribed", "fieldId": "c1fb4799-b71c-444f-9bb0-f57b37dbdd8b", "fieldName": "status", "fieldType": "dropdown", "columnName": "status", "comparator": "neq"}, "condition": "AND"}, {"type": "email_event", "filters": [], "criteria": {"id": 0, "operation": "not_sent", "dateCondition": {"value": "2021-02-03T18:30:00.000Z", "operator": "last_n_days_including_today", "timezone": -330, "relativeDateCount": "3"}, "resourceMatchType": "anyResource"}, "condition": "AND"}], "condition": "AND"}]}
  - context: None
  - retrieval context: ['{\n    "condition": "AND",\n    "matchGroups": [\n        {\n            "condition": "AND",\n            "matches": [\n                {\n                    "type": "list_membership",\n                    "condition": "AND",\n                    "criteria": {\n                        "id": 15034,\n                        "resourceMatchType": "specificResource",\n                        "operation": "eq"\n                    }\n                },\n                {\n                    "type": "contact_field",\n                    "condition": "AND",\n                    "criteria": {\n                        "fieldId": "5d926007-8a23-430b-a587-0173b23dde8e",\n                        "fieldName": "cf_cf_gdprdoubleopt-in",\n                        "columnName": "cf_cf_gdprdoubleopt-in",\n                        "fieldType": "big_number",\n                        "comparator": "neq",\n                        "value": "0",\n                        "secondValue": ""\n                    }\n                },\n                {\n                    "type": "email_event",\n                    "condition": "AND",\n                    "criteria": {\n                        "operation": "not_sent",\n                        "id": 0,\n                        "resourceMatchType": "anyResource",\n                        "occurenceCondition": {\n                            "name": "count",\n                            "type": "number",\n                            "operator": "last_n_days_including_today",\n                            "value": "3",\n                            "dateCondition": {\n                                "operator": "last_n_days_including_today",\n                                "timezone": -330,\n                                "value": "2024-06-18T13:09:00.108Z",\n                                "relativeDateCount": 3\n                            }\n                        },\n                        "dateCondition": {\n                            "operator": "last_n_days_including_today",\n                            "timezone": -330,\n                            "value": "2024-06-18T13:09:00.108Z",\n                            "relativeDateCount": 3\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}']

======================================================================

Overall Metric Pass Rates

Contextual Recall: 0.00% pass rate
Answer Relevancy: 100.00% pass rate

======================================================================

✅ Tests finished! View results on 
https://app.confident-ai.com/project/clwzxg76s000clc0ch0w2kpcw/unit-tests/cly0xh
qc5078hns2ann45hawx/test-cases
